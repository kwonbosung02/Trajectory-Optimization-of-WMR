
function [c,ceq] = NonLinearConstraints(X) %x y theta v w

global idx params;

x = X(idx.x,1:n_hor);
y = X(idx.y,1:n_hor);
theta = X(idx.theta,1:n_hor);
v = X(idx.v,1:n_hor);
w = X(idx.w,1:n_hor);
dt = params.dt;

n_states = idx.n_states;



%circle
for i=1:size(x,2)
    outCircle(i) = -((x(1,i)- 5)^2 + (y(1,i)-0)^2 - 2^2);
    
    if i~=size(x,2)
        dynConst(n_states*(i-1)) =  x(1,i+1) - x(1,i) - dt * x(4,i) * cos( x(3,i) ) ;
        dynConst(i) =  x(1,i+1) - x(1,i) - dt * x(4,i) * cos( x(3,i) ) ;
        dynConst(i) =  x(1,i+1) - x(1,i) - dt * x(4,i) * cos( x(3,i) ) ;
    else
        
    end
end

c = [outCircle];

ceq = [];

end